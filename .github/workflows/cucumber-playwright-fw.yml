name: cucumber-playwright-fw
on: push

jobs:
  test:
   timeout-minutes: 60
   name: Run UI Tests
   runs-on: ubuntu-latest
   steps:
     - name: Checkout
       uses: actions/checkout@v3
     - name: Setup Node
       uses: actions/setup-node@v3
       with:
         node-version: 18
     - name: Install Dependencies
       run: npm install
     - name: Install Playwright Browsers
       run: npx playwright install --with-deps  
     - name: Run Dev Tests
       run: npm run dev
     - name: Generate Reports
       if: always()
       run: npm run generate-report
     - name: Archive Test Results
       if: always()
       uses: actions/upload-artifact@v3
       with:
         name: cucumber-results
         path: test-results/reports/cucumber-report.html 
